const fs = require('fs');
const path = require('path');

const outputDir = path.join(__dirname, '../content/next-js');

const topics = [
    {
        title: "Advanced Routing Patterns",
        slug: "advanced-routing",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "12 mins",
        prerequisites: ["Route Handlers"],
        learning_objectives: ["Parallel Routes", "Intercepting Routes", "Route Groups"],
        theory: "Advanced patterns unlock complex UIs. Parallel Routes (`@folder`) render multiple pages in one view (dashboards). Intercepting Routes (`(..)`) allow loading a route within current layout (modals). Route Groups (`(group)`) organize code without affecting URL structure.",
        syntax: "@slot and (..)target",
        examples: [
            {
                code: "app/@analytics/page.tsx\napp/layout.tsx: props.analytics",
                output: "Renders analytics slot in parallel.",
                explanation: "Dashboard pattern."
            }
        ],
        common_mistakes: [],
        interview_questions: [{ "question": "What are Parallel Routes used for?", "answer": "Rendering independent slots of UI simultaneously.", "difficulty": "Advanced" }],
        practice_problems: [],
        real_world_use_cases: ["Instagram-style photo modal"],
        exam_notes: [],
        summary: "Complex UI navigation.",
        order: 41
    },
    {
        title: "Dynamic Routes & Catch-All Routes",
        slug: "dynamic-routes",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "10 mins",
        prerequisites: ["File-Based Routing"],
        learning_objectives: ["Dynamic Segments", "Catch-all", "Optional Catch-all"],
        theory: "Dynamic Segments `[slug]` match one segment. Catch-all `[...slug]` match all subsequent segments. Optional Catch-all `[[...slug]]` matches root + segments.",
        syntax: "app/shop/[...slug]/page.tsx",
        examples: [
            {
                code: "// URL: /shop/clothes/tops\nparams = { slug: ['clothes', 'tops'] }",
                output: "Flexible routing",
                explanation: "CMS integration pattern."
            }
        ],
        common_mistakes: [],
        interview_questions: [{ "question": "Diff between [...slug] and [[...slug]]?", "answer": "Double brackets match the route without params too.", "difficulty": "Medium" }],
        practice_problems: [],
        real_world_use_cases: ["Docs site with nested paths"],
        exam_notes: [],
        summary: "Handling variable URLs.",
        order: 42
    },
    {
        title: "Internationalization (i18n)",
        slug: "i18n",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "15 mins",
        prerequisites: ["Middleware"],
        learning_objectives: ["Routing for locales", "Dictionaries"],
        theory: "i18n in App Router involves middleware to detect locale and redirect to `/[lang]/path`. Content is often fetched from dictionaries based on the param.",
        syntax: "app/[lang]/page.tsx",
        examples: [],
        common_mistakes: [],
        interview_questions: [],
        practice_problems: [],
        real_world_use_cases: ["Multi-language sites"],
        exam_notes: [],
        summary: "Going global.",
        order: 43
    },
    {
        title: "Security Best Practices",
        slug: "security-best-practices",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "10 mins",
        prerequisites: ["Environment Variables"],
        learning_objectives: ["XSS protection", "CSRF", "Content Security Policy"],
        theory: "Next.js sanitizes inputs by default. Ensure secrets stay on server. Use Headers to set CSP. Validate all Server Action inputs (Zod).",
        syntax: "N/A",
        examples: [],
        common_mistakes: [{ "mistake": "Trusting client input", "correction": "Always validate FormData with Zod." }],
        interview_questions: [],
        practice_problems: [],
        real_world_use_cases: [],
        exam_notes: [],
        summary: "Safety first.",
        order: 44
    },
    {
        title: "Next.js with Databases",
        slug: "nextjs-databases",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "12 mins",
        prerequisites: ["Server Components"],
        learning_objectives: ["Connecting DB", "Prisma/Drizzle ORM", "Connection Pooling"],
        theory: "Connect to databases directly in Server Components or Route Handlers. Since Next.js is serverless, use connection pooling (e.g., Supabase Transaction Pool) to avoid exhausting connections.",
        syntax: "const users = await db.user.findMany()",
        examples: [],
        common_mistakes: [{ "mistake": "Initializing DB client inside component", "correction": "Initialize in a singleton file to reuse connections." }],
        interview_questions: [],
        practice_problems: [],
        real_world_use_cases: [],
        exam_notes: [],
        summary: "Full-stack power.",
        order: 45
    },
    {
        title: "Next.js with MongoDB / SQL",
        slug: "nextjs-mongodb-sql",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "12 mins",
        prerequisites: ["Next.js with Databases"],
        learning_objectives: ["Mongoose setup", "MySQL with serverless drivers"],
        theory: "Specific guides for connecting MongoDB (Mongoose) and SQL (Postgres/MySQL). Focus on handling cold starts and connection caching.",
        syntax: "mongoose.connect(URI)",
        examples: [],
        common_mistakes: [],
        interview_questions: [],
        practice_problems: [],
        real_world_use_cases: [],
        exam_notes: [],
        summary: "Data persistence.",
        order: 46
    },
    {
        title: "Full-Stack App Architecture",
        slug: "full-stack-architecture",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "15 mins",
        prerequisites: ["All Topics"],
        learning_objectives: ["Monorepo", "Layered Architecture", "Testing"],
        theory: "Structuring large apps: separating `services` (DB logic), `actions` (Server Actions), and `components` (UI). Integration testing with Playwright.",
        syntax: "N/A",
        examples: [],
        common_mistakes: [],
        interview_questions: [],
        practice_problems: [],
        real_world_use_cases: ["SaaS platforms"],
        exam_notes: [],
        summary: "Building for scale.",
        order: 47
    },
    {
        title: "Deployment with Vercel",
        slug: "deployment-vercel",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "10 mins",
        prerequisites: ["Build Commands"],
        learning_objectives: ["Zero config deploy", "Previews", "Edge Network"],
        theory: "Vercel is the creators' platform. Git push triggers build. Features include Immutable Deploys, instant rollback, and global Edge Network caching.",
        syntax: "vercel deploy",
        examples: [],
        common_mistakes: [],
        interview_questions: [{ "question": "What is an Edge Network?", "answer": "CDN on steroids executing code near users.", "difficulty": "Medium" }],
        practice_problems: [],
        real_world_use_cases: [],
        exam_notes: [],
        summary: "Ship to the world.",
        order: 48
    },
    {
        title: "Next.js Interview Preparation",
        slug: "interview-prep",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "20 mins",
        prerequisites: ["All Topics"],
        learning_objectives: ["Core Concepts Recap", "Common Questions", "System Design"],
        theory: "A compilation of top 20 Next.js interview questions, covering SSR vs CSR, Image Optimization, Routing, and Middleware.",
        syntax: "N/A",
        examples: [],
        common_mistakes: [],
        interview_questions: [],
        practice_problems: [],
        real_world_use_cases: [],
        exam_notes: [],
        summary: "Ace the interview.",
        order: 49
    },
    {
        title: "Real-World Next.js Production Case Studies",
        slug: "case-studies",
        subject: "Next.js",
        category: "Full Stack Framework",
        level: "Advanced",
        estimated_read_time: "20 mins",
        prerequisites: ["All Topics"],
        learning_objectives: ["Hulu", "Netflix", "Twitch"],
        theory: "Analysis of how major companies use Next.js for high-traffic sites. Focus on Hybrid Rendering and Performance patterns.",
        syntax: "N/A",
        examples: [],
        common_mistakes: [],
        interview_questions: [],
        practice_problems: [],
        real_world_use_cases: ["Large scale migration"],
        exam_notes: [],
        summary: "Learning from the giants.",
        order: 50
    }
];

topics.forEach(topic => {
    const filePath = path.join(outputDir, `${topic.slug}.json`);
    fs.writeFileSync(filePath, JSON.stringify(topic, null, 2));
    console.log(`Generated ${topic.slug}`);
});
